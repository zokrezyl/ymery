widgets:
  # Tooltip for kernel node hover
  kernel-node-tooltip:
    type: tooltip
    body:
      - text: "Metadata:"
      - separator
      - foreach-key:
          - text: "$key: $value"

  # Popup for kernel demo
  kernel-demo-popup:
    type: popup
    data:
      kernel:
        type: kernel
      selection:
        type: data-tree
        arg:
          metadata:
            selection: ""
    main-data: kernel
    body:
      - text: "Kernel TreeLike Demo - Click nodes to select, hover to see metadata"
      - separator
      - text: "Selection: "
      - same-line
      - text:
          label: "$selection@/selection"
          style:
            text: [0.2, 1.0, 0.2, 1.0]
      - separator
      - data-path: $kernel
        kernel-recursive:

  # Helper widget for recursive kernel tree display
  kernel-recursive:
    type: composite
    body:
      - foreach-child:
          - tree-node:
              body: kernel-recursive
              on-click: default
              on-hover:
                show: kernel-node-tooltip
              selection: "$selection@/selection"
              style-mapping:
                openable:
                  text: [0.2, 0.8, 0.2, 1.0]
                opened:
                  text: [0.8, 0.8, 0.2, 1.0]

  # Tab content for Kernel Demo
  kernel-demo-tab:
    type: composite
    data:
      kernel:
        type: kernel
    main-data: kernel
    body:
      # Upper part: Button to open popup
      - button:
          label: "Open Kernel Demo Popup"
          body: kernel-demo-popup
      - separator
      - text: "Local Data Tree:"
      # Lower part: Tree view of local data
      - child:
          size: [0, 300]
          border: true
          body:
            - data-path: $kernel
              builtin.tree-view:
