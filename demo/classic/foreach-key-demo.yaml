widgets:
  # Popup for Foreach-Key demo (used from Popups tab)
  foreach-key-demo-popup:
    type: popup
    data:
      local:
        type: data-tree
        arg:
          metadata:
            name: "Sample Node"
            type: "demo"
            status: "active"
            count: 42
    main-data: local
    body:
      - foreach-key-demo-content:

  # Reusable content for both tab and popup (inherits data from parent)
  foreach-key-demo-content:
    type: composite
    body:
      - text: "foreach-key Demo - Displays metadata keys and values"
      - separator
      - text: "Simple form (shows values only):"
      - foreach-key:
          - text: "$value"
      - separator
      - text: "Complex form (shows keys and values):"
      - foreach-key:
          - text: "$key: $value"
          - separator

  # Tab content - shows demo content directly
  foreach-key-demo-tab:
    type: composite
    data:
      local:
        type: data-tree
        arg:
          metadata:
            name: "Sample Node"
            type: "demo"
            status: "active"
            count: 42
    main-data: local
    body:
      - foreach-key-demo-content:
      - separator
      - text: "Local Data Tree:"
      - child:
          size: [0, 300]
          border: true
          body:
            - builtin.tree-view:

  # Button for Popups tab
  foreach-key-demo-button:
    type: composite
    body:
      - button:
          label: "Open Foreach-Key Demo Popup"
          body: foreach-key-demo-popup
